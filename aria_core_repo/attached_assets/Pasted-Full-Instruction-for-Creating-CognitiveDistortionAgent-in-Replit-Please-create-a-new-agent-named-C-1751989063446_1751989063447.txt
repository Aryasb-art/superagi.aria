Full Instruction for Creating CognitiveDistortionAgent in Replit

Please create a new agent named `CognitiveDistortionAgent` with the following full specifications:

1. Purpose:
Detect and analyze common cognitive distortions in user input (text, thoughts, reflections, or decisions), and provide structured feedback for self-awareness and mental clarity.

2. Supported Distortion Types:
The agent must detect at least the following 10 distortions:
- All-or-nothing thinking
- Overgeneralization
- Catastrophizing
- Labeling
- Personalization
- Mind reading
- Emotional reasoning
- Filtering
- Blaming
- Fortune-telling

3. Analysis Method:
- Use a hybrid method: predefined pattern detection + GPT-4o-based fallback
- Each distortion detected must be accompanied by:
  - A brief explanation
  - Severity score from 0.0 to 1.0
  - A recommendation for cognitive reframing

4. Output Format (JSON):
Return a structured JSON response like this:
{
  "detected_types": ["overgeneralization", "mind reading"],
  "severity_score": 0.74,
  "recommendation": "Consider whether you're assuming what others think without evidence.",
  "related_emotion": "anxiety",
  "related_goal": "avoid rejection"
}

5. Database:
Create a new table named `cognitive_distortion_logs` with fields:
- id (PRIMARY KEY)
- timestamp (default now)
- detected_types (TEXT[])
- severity_score (FLOAT)
- recommendation (TEXT)
- related_emotion (TEXT)
- related_goal (TEXT)

6. API Endpoints:
- POST /agent/cognitive-distortion/analyze
- GET /agent/cognitive-distortion/logs

7. Frontend UI:
- Add a new section labeled "üß† Cognitive Distortions (ÿ™ÿ≠ÿ±€åŸÅ‚ÄåŸáÿß€å ÿ¥ŸÜÿßÿÆÿ™€å)"
- Support both Persian and English
- Input box (textarea) for user to enter thoughts
- Visual tags for each distortion type
- Severity progress bar (color coded)
- Display suggestion in a friendly tone
- Button: ‚ÄúReframe thought‚Äù to generate an alternative healthy interpretation

8. Agent Integration:
- Link with:
  - EmotionRegulationAgent (to interpret related emotional tone)
  - GoalInferenceAgent (to determine distortion‚Äìgoal conflicts)
  - SelfAwarenessAgent (to log reflection and promote internal insight)
  - BiasDetectionAgent (to differentiate bias vs. distortion)

9. Advanced Features:
- Log all entries in the DB for analysis
- Include journaling prompt or CBT-style question (optional)
- If high severity + critical wording is detected (e.g. suicidal ideation), prepare handoff to future CrisisInterventionAgent (not yet implemented)

Make sure this agent is fully compatible with the existing architecture and registered with MasterAgent if required.